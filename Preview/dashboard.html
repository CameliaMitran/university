<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" href="images/favicon.png" type="image/png" />
	<link href="css/simplebar.css" rel="stylesheet" />
	<link href="css/perfect-scrollbar.css" rel="stylesheet" />
	<link href="css/metisMenu.min.css" rel="stylesheet" />
	<link href="css/pace.min.css" rel="stylesheet" />
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/app.css" rel="stylesheet">
	<link href="css/icons.css" rel="stylesheet">
	<link rel="stylesheet" href="css/dark-theme.css" />
	<link rel="stylesheet" href="css/semi-dark.css" />
	<link rel="stylesheet" href="css/header-colors.css" />
	<title>FACULTY OF AUTOMATICS, COMPUTER SCIENCE AND ELECTRONICS</title>
	<style>
		td.details-control {
    background: url('images/details_open.png') no-repeat center center;
    cursor: pointer;
}
tr.details td.details-control {
    background: url('images/details_close.png') no-repeat center center;
}
	</style>
</head>

<body>
	<div class="wrapper">
		<div class="sidebar-wrapper" data-simplebar="true">
			<div class="sidebar-header">
				<div>
					<img src="images/logo_ucv.png" class="logo-icon" alt="logo icon">
				</div>
				<div>
					<h4 class="logo-text">ACE</h4>
				</div>
				<div class="toggle-icon ms-auto"><i class='bx bx-arrow-to-left'></i>
				</div>
			</div>
			<ul class="metismenu" id="menu">
				<li class="menu-label">MENU</li>
				<li>
					<a id="dashboard">
						<div class="parent-icon"><i class='bx bx-home-circle'></i>
						</div>
						<div class="menu-title">Dashboard</div>
					</a>
				</li>
				<li>
					<a id="notifications">
						<div class="parent-icon"><i class="bx bxs-bell-ring"></i>
						</div>
						<div class="menu-title">Notifications</div>
					</a>
					<a id="apply">
						<div class="parent-icon"><i class="bx bx-task"></i>
						</div>
						<div class="menu-title">Apply</div>
					</a>
				</li>
				<li>
					<a id="contact">
						<div class="parent-icon"><i class="bx bx-message-square-edit"></i>
						</div>
						<div class="menu-title">Contact</div>
					</a>
				</li>
			</ul>
		</div>
		<header>
			<div class="topbar d-flex align-items-center">
				<nav class="navbar navbar-expand">
					<div class="mobile-toggle-menu"><i class='bx bx-menu'></i>
					</div>
					<div class="search-bar flex-grow-1">
						<div class="position-relative search-bar-box">
							<input type="text" class="form-control search-control" placeholder="Type to search...">
							<span class="position-absolute top-50 search-show translate-middle-y"><i
									class='bx bx-search'></i></span>
							<span class="position-absolute top-50 search-close translate-middle-y"><i
									class='bx bx-x'></i></span>
						</div>
					</div>


					<div class="user-box dropdown">
						<a class="d-flex align-items-center nav-link dropdown-toggle dropdown-toggle-nocaret" href="#"
							role="button" data-bs-toggle="dropdown" aria-expanded="false">
							<img src="images/avatars/3.png" class="user-img" alt="user avatar">
							<div class="user-info ps-3">
								<p class="user-name mb-0" id="full_name">Admin Name</p>
								<p class="designattion mb-0 " id="role"> Web Designer</p>
							</div>
						</a>
						<ul class="dropdown-menu dropdown-menu-end">
							<li><a class="dropdown-item" href="javascript:;"><i
										class="bx bx-user"></i><span>Profile</span></a>
							</li>

							<li>
								<div class="dropdown-divider mb-0"></div>
							</li>
							<li><a class="dropdown-item" href="javascript:;"><i
										class='bx bx-log-out-circle'></i><span>Logout</span></a>
							</li>
						</ul>
					</div>
				</nav>
			</div>
		</header>
		<div class="page-wrapper">
			<div class="page-content d-none" id="dashboard_student">

				<div class="row">
					<div class="col-12 d-flex">
						<div class="card radius-10 w-100">
							<div class="card-body">
								<div class="d-flex align-items-center">
									<div>
										<h6 class="mb-0">FACULTY OF AUTOMATICS, COMPUTER SCIENCE AND ELECTRONICS</h6>
									</div>
								</div>
								<br>
								<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
									<div class="carousel-inner" style="height: 270px;">
										<div class="carousel-item active">
											<img class="d-block w-100" src="images\MicroElectronics.jpg"
												alt="First slide">
										</div>
										<div class="carousel-item">
											<img class="d-block w-100" src="images\ComputersRoom.jpg"
												alt="Second slide">
										</div>
										<div class="carousel-item">
											<img class="d-block w-100" src="" alt="Third slide">
										</div>
									</div>
									<a class="carousel-control-prev" href="#carouselExampleControls" role="button"
										data-slide="prev">
										<span class="carousel-control-prev-icon" aria-hidden="true"></span>
										<span class="sr-only">Previous</span>
									</a>
									<a class="carousel-control-next" href="#carouselExampleControls" role="button"
										data-slide="next">
										<span class="carousel-control-next-icon" aria-hidden="true"></span>
										<span class="sr-only">Next</span>
									</a>
								</div>
								<br>
								<div class="d-flex align-items-center">
									<div>
										<h6 class="mb-0">1990 - The Faculty of Automatics, Computer Science and
											Electronics was founded, based on the Automatics and Computer Science
											specialisation within the Faculty of Electrical Engineering; The faculty
											developed gradually and more specialisations were added to the initial two
											(Automatics and Industrial Information Technology and Computer Science):
											Applied Electronics (1992), Applied Computer Science (2000), Mechatronics
											(2001), Multimedia Systems Engineering (2005) and Robotics (2006).</h6>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="row row-cols-1 row-cols-md-2">
						<div class="col">
							<div class="card radius-10 bg-info">
								<div class="card-body">
									<div class="d-flex align-items-center">
										<h5 class="mb-0 text-white">Computers and information technology</h5>
										<div class="ms-auto">
											<i class='bx bx-laptop fs-3 text-white'></i>
										</div>
									</div>
									<div class="progress my-3 bg-light-transparent" style="height:3px;">
										<div class="progress-bar bg-white" role="progressbar" style="width: 55%"
											aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
									<div class="d-flex align-items-center text-white">
										<p class="mb-0 text-white">Computer science</p>
									</div>
									<div class="d-flex align-items-center text-white">
										<p class="mb-0 text-white">Computer science (English-taught programme)</p>
									</div>
								</div>
							</div>
						</div>
						<div class="col">
							<div class="card radius-10 bg-info">
								<div class="card-body">
									<div class="d-flex align-items-center">
										<h5 class="mb-0 text-white">Electrical engineering and telecommunications</h5>
										<div class="ms-auto">
											<i class='bx bx-time fs-3 text-white'></i>
										</div>
									</div>
									<div class="progress my-3 bg-light-transparent" style="height:3px;">
										<div class="progress-bar bg-white" role="progressbar" style="width: 55%"
											aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
									<div class="d-flex align-items-center text-white">
										<p class="mb-0 text-white">Applied electronics</p>
									</div>
								</div>
							</div>
						</div>
						<div class="col">
							<div class="card radius-10 bg-info">
								<div class="card-body">
									<div class="d-flex align-items-center">
										<h5 class="mb-0 text-white">System engineering</h5>
										<div class="ms-auto">
											<i class='bx bx-pause-circle fs-3 text-white'></i>
										</div>
									</div>
									<div class="progress my-3 bg-light-transparent" style="height:3px;">
										<div class="progress-bar bg-white" role="progressbar" style="width: 55%"
											aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
									<div class="d-flex align-items-center text-white">
										<p class="mb-0">Automatics and applied computer science</p>
									</div>
									<div class="d-flex align-items-center text-white">
										<p class="mb-0">Multimedia systems engineering</p>
									</div>
								</div>
							</div>
						</div>
						<div class="col">
							<div class="card radius-10 bg-info">
								<div class="card-body">
									<div class="d-flex align-items-center">
										<h6 class="mb-0 text-white">Mechatronics and robotics</h6><br>
										<div class="ms-auto">
											<i class='bx bx-calendar fs-3 text-white'></i>
										</div>
									</div>
									<div class="progress my-3 bg-light-transparent" style="height:3px;">
										<div class="progress-bar bg-white" role="progressbar" style="width: 55%"
											aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
									<div class="d-flex align-items-center text-white">
										<p class="mb-0">Mechatronics</p>
									</div>
									<div class="d-flex align-items-center text-white">
										<p class="mb-0">Robotics </p>
									</div>
								</div>
							</div>
						</div>

					</div>

					<div class="col-12 col-lg-12 col-xl-6">
						<div class="card radius-10">
							<div class="card-body">
								<div class="d-flex align-items-center mb-3">
									<div>
										<h6 class="mb-0">Message of the day</h6>
									</div>
									<div class="font-22 ms-auto text-white"><i
											class="bx bx-dots-horizontal-rounded"></i>
									</div>
								</div>
								<div id="dashboard-map" style="height: 330px;"></div>
							</div>
						</div>
					</div>

					<div class="col-12 col-lg-12 col-xl-6">
						<div class="row">
							<div class="col-12 col-lg-6">
								<div class="card radius-10 overflow-hidden">
									<div class="card-body">
										<p>Campaign Leads Resources</p>
										<h6 class="mb-0">Campaign :<small class="font-13">0 <i
													class="zmdi zmdi-long-arrow-up"></i></small></h6>
									</div>
									<div class="chart-container-2">
										<canvas id="chart3"></canvas>
									</div>
								</div>
							</div>
							<div class="col-12 col-lg-6">
								<div class="card radius-10 overflow-hidden">
									<div class="card-body">
										<p>Agent Monitoring Summary</p>
										<h6 class="mb-0">View More <small class="font-13"><i
													class="zmdi zmdi-long-arrow-up"></i></small></h6>
									</div>
									<div class="chart-container-2">
										<canvas id="chart4"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="page-content d-none" id="dashboard_admin">
				<div class="card radius-10">
					<div class="card-body">
						<div class="d-flex align-items-center">
							<div>
								<h5 class="mb-0">Users</h5>
							</div>
							<div class="d-flex mr-4 ms-auto">
								<a onclick="PredictiveSDK.callFlowAction('createuser',7 );"
									class="btn btn-success pull-right remote_modal waves-effect waves-themed">
									<i class="fal fa-plus bx bx-user mr-1"></i>Create User</a>
							</div>
						</div>
						<hr>
						<div class="table-responsive">
							<table class="table align-middle mb-0" id="users">
								<thead class="table-light">
									<tr>
										<th></th>
										<th>First Name</th>
										<th>Last Name</th>
										<th>Email</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody>


								</tbody>
							</table>
						</div>
					</div>
				</div>
				<div class="card radius-10">
					<div class="card-body">
						<div class="d-flex align-items-center">
							<div>
								<h5 class="mb-0">Applications</h5>
							</div>
							<div class="d-flex mr-4 ms-auto">

							</div>
						</div>
						<hr>
						<div class="table-responsive">
							<table class="table align-middle mb-0" id="apllications">
								<thead class="table-light">
									<tr>
										<th></th>
										<th>First Name</th>
										<th>Last Name</th>
										<th>Application Nr.</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody>


								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>
	<div class="overlay toggle-icon"></div>
	<a href="javaScript:;" class="back-to-top"><i class='bx bxs-up-arrow-alt'></i></a>
	<footer class="page-footer">
		<p class="mb-0">Copyright Camelia Mitran © 2021. All right reserved.</p>
	</footer>
	</div>
	<div class="switcher-wrapper">
		<div class="switcher-btn"> <i class='bx bx-cog bx-spin'></i>
		</div>
		<div class="switcher-body">
			<div class="d-flex align-items-center">
				<h5 class="mb-0 text-uppercase">Theme Customizer</h5>
				<button type="button" class="btn-close ms-auto close-switcher" aria-label="Close"></button>
			</div>
			<hr />
			<h6 class="mb-0">Theme Styles</h6>
			<hr />
			<div class="d-flex align-items-center justify-content-between">
				<div class="form-check">
					<input class="form-check-input" type="radio" name="flexRadioDefault" id="lightmode" checked>
					<label class="form-check-label" for="lightmode">Light</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="flexRadioDefault" id="darkmode">
					<label class="form-check-label" for="darkmode">Dark</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="flexRadioDefault" id="semidark">
					<label class="form-check-label" for="semidark">Semi Dark</label>
				</div>
			</div>
			<hr />
			<div class="form-check">
				<input class="form-check-input" type="radio" id="minimaltheme" name="flexRadioDefault">
				<label class="form-check-label" for="minimaltheme">Minimal Theme</label>
			</div>
			<hr />
			<h6 class="mb-0">Header Colors</h6>
			<hr />
			<div class="header-colors-indigators">
				<div class="row row-cols-auto g-3">
					<div class="col">
						<div class="indigator headercolor1" id="headercolor1"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor2" id="headercolor2"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor3" id="headercolor3"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor4" id="headercolor4"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor5" id="headercolor5"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor6" id="headercolor6"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor7" id="headercolor7"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor8" id="headercolor8"></div>
					</div>
				</div>
			</div>

			<hr />
			<h6 class="mb-0">Sidebar Backgrounds</h6>
			<hr />
			<div class="header-colors-indigators">
				<div class="row row-cols-auto g-3">
					<div class="col">
						<div class="indigator sidebarcolor1" id="sidebarcolor1"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor2" id="sidebarcolor2"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor3" id="sidebarcolor3"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor4" id="sidebarcolor4"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor5" id="sidebarcolor5"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor6" id="sidebarcolor6"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor7" id="sidebarcolor7"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor8" id="sidebarcolor8"></div>
					</div>
				</div><br>
			</div>
			<div class="col text-center">
				<button type="button" class="btn btn-primary px-2"><i class="bx bx-cloud-upload mr-1"></i>Save Theme
					Style</button>
			</div>

		</div>
	</div>
	<script src="js/bootstrap.bundle.min.js"></script>
	<script src="js/jquery.min.js"></script>
	<script src="js/simplebar.min.js"></script>
	<script src="js/metisMenu.min.js"></script>
	<script src="js/perfect-scrollbar.js"></script>
	<script src="js/pace.min.js"></script>
	<script src="js/jquery.dataTables.min.js"></script>
	<script src="js/dataTables.bootstrap5.min.js"></script>
	<script src="js/dataTables.fixedHeader.min.js"></script>
	<script src="js/dataTables.responsive.min.js"></script>
	<script src="js/app.js"></script>
	
	<script>
		var token = localStorage.getItem("token");
		if (!token) {
			window.location.href = "index.html";
		}

		$.ajax({
			url: "http://localhost:8282/api/me", // Upload Script

			contentType: false,
			processData: false,
			type: 'get',
			headers: { 'Authorization': 'Bearer ' + token },
			success: function (data) {
				console.log(data);
				if (data.role == 'admin') {
					$('#full_name').html('Administrator');
					$('#role').html(data.role );
					$('#dashboard_admin').removeClass('d-none');
					$.ajax({
						url: "http://localhost:8282/api/users", // Upload Script

						contentType: false,
						processData: false,

						type: 'get',
						headers: { 'Authorization': 'Bearer ' + token },
						success: function (data) {
							var table = $('#users').DataTable({
								"processing": true,

								"data": data,
								"responsive": true,
								"columns": [
									{
										"class": "details-control",
										"orderable": false,
										"data": null,
										"defaultContent": ""
									},
									{
										"data": "first_name"

									},
									{
										"data": "last_name"

									},
									{
										"data": "email"

									},
								

									{
										"data": null,
										"render": function (data, type, row, meta) {
										
											return `<div class="d-flex order-actions"><a onclick="PredictiveSDK.callFlowAction('activateuser', ` + row._id + `)" class=""><i class="bx bx-user-check"></i></a>
                            <a onclick="PredictiveSDK.callFlowAction('deleteuser', `+ row._id + `)" class="ms-4"><i class="bx bx-trash"></i></a></div>`;
										}

									},



								],

							});
							var detailRows = [];
							$('#users tbody').on('click', 'tr td.details-control', function () {
								var tr = $(this).closest('tr');
								var row = table.row(tr);
								var idx = $.inArray(tr.attr('id'), detailRows);

								if (row.child.isShown()) {
									tr.removeClass('details');
									row.child.hide();

									// Remove from the 'open' array
									detailRows.splice(idx, 1);
								}
								else {
									tr.addClass('details');
									row.child(props.userdetails(row.data())).show();

									// Add to the 'open' array
									if (idx === -1) {
										detailRows.push(tr.attr('id'));
									}
								}
							});
							table.on('draw', function () {
								$.each(detailRows, function (i, id) {
									$('#' + id + ' td.details-control').trigger('click');
								});
							});
						},
						error: function (xhr, status, error) {
							console.log(xhr);
						}

					});
					$.ajax({
						url: "http://localhost:8282/api/students", // Upload Script

						contentType: false,
						processData: false,

						type: 'get',
						headers: { 'Authorization': 'Bearer ' + token },
						success: function (data) {
							var table = $('#apllications').DataTable({
								"processing": true,

								"data": data,
								"responsive": true,
								"columns": [
									{
										"class": "details-control",
										"orderable": false,
										"data": null,
										"defaultContent": ""
									},
									{
										"data": "first_name"

									},
									{
										"data": "last_name"

									},
									{
										"data": "_id"

									},
								

									{
										"data": null,
										"render": function (data, type, row, meta) {
										
											return `<div class="d-flex order-actions"><a onclick="PredictiveSDK.callFlowAction('activateuser', ` + row._id + `)" class=""><i class="bx bx-user-check"></i></a>
                            <a onclick="PredictiveSDK.callFlowAction('deleteuser', `+ row._id + `)" class="ms-4"><i class="bx bx-trash"></i></a></div>`;
										}

									},



								],

							});
							var detailRows = [];
							$('#apllications tbody').on('click', 'tr td.details-control', function () {
								var tr = $(this).closest('tr');
								var row = table.row(tr);
								var idx = $.inArray(tr.attr('id'), detailRows);

								if (row.child.isShown()) {
									tr.removeClass('details');
									row.child.hide();

									// Remove from the 'open' array
									detailRows.splice(idx, 1);
								}
								else {
									tr.addClass('details');
									row.child(props.userdetails(row.data())).show();

									// Add to the 'open' array
									if (idx === -1) {
										detailRows.push(tr.attr('id'));
									}
								}
							});
							table.on('draw', function () {
								$.each(detailRows, function (i, id) {
									$('#' + id + ' td.details-control').trigger('click');
								});
							});
						},
						error: function (xhr, status, error) {
							console.log(xhr);
						}

					});
				} else {
					$('#dashboard_student').removeClass('d-none');
				}

			},
			error: function (xhr, status, error) {
				console.log(xhr);
			}

		});

		$('#apply').on('click', function () {
			window.location.href = "apply.html"
		})
	</script>

</body>

</html>